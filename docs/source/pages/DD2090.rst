.. _dd2090ffc:

OAK-FFC-4P
==========

`Buy it on Luxonis shop <https://shop.luxonis.com/collections/modular-cameras/products/oak-ffc-4p>`__

.. thumbnail:: /_static/images/FFC-4P/OAK-FFC-4P-front.png

Overview
********

The **OAK-FFC-4P** (DD2090FFC) baseboard has **4 FFC interfaces** which allows for:

- **Two 2-lane MIPI** camera modules, eg. :ref:`OAK-FFC-OV9282 <bg0250tg>` (stereo pair)
- **Two 4-lane MIPI** camera modules, eg. :ref:`OAK-FFC-IMX378 <bg0249>` RGB camera module, or additional :ref:`OAK-FFC-OV9282 <bg0250tg>` if RGB camera module is not required

Please note that only revision R1M1E1 and newer camera modules can be connected to this OAK FFC board.

To see **which cameras are compatible with this OAK FFC baseboard**, see the guide here: :ref:`OAK FFC camera modules`.
Some of camera modules have a :ref:`M12 mount <M12 mount lenses>`, so you can use different lenses to get **custom FoV** (with :ref:`wide or narrow FOV M12 lenses <M12 selectable FOV>`).

This board uses :ref:`OAK-SoM-Pro` and is also compatible with RPi camera interface. For that you will need a `FFC from Arducam <https://www.arducam.com/product/arducam-12mp-imx477-mini-high-quality-camera-with-m12-mount-lens-and-adapter-board-for-depthai/>`__,
which converts 26-pin Luxonis camera pinout to 22 pin RPi camera pinout.

In addition, IMU (over SPI) sensor is also added to this OAK FFC board.

.. include:: /pages/rvc/includes/rvc2_inside.rst

.. include::  /pages/includes/ffc_socket_api.rst


OAK-FFC-4P syncing
******************

2-lane MIPI connections (CAM_B and CAM_C) have FSYNC line shorted together, and so do 4-lane MIPI connections (CAM_A and CAM_D).
But if you want to enable :ref:`Hardware message syncing` for all 4 cameras, you need to connect the two FSYNC lines together. This can be done with the depthai API:

.. code-block:: python

    # OAK-FFC-4P requires driving GPIO6 high (FSIN_MODE_SELECT) to connect together
    # the A+D FSIN group (4-lane pair) with the B+C group (2-lane pair)
    config = dai.Device.Config()
    # For FFC-4P R6 (revision 6) or higher, we changed FSIN_MODE_SELECT from GPIO6 to GPIO38!
    config.board.gpio[6] = dai.BoardConfig.GPIO(dai.BoardConfig.GPIO.OUTPUT,
                                                dai.BoardConfig.GPIO.Level.HIGH)
    with dai.Device(config) as device:
        device.startPipeline(pipeline)

.. thumbnail:: /_static/images/FFC-4P/ffc-4p-sync.png

Syncing with OAK-FFC-IR
-----------------------

If you have an OAK-FFC-4P R5 or newer and you wish to use the `OAK-FFC-IR <https://shop.luxonis.com/collections/early-access/products/oak-ffc-ir>`__ module, you **must** first configure which camera will drive the STROBE signal to the connector to which you connect your IR module. The connector located to the left of the switch (J12, see the image below). 


.. thumbnail:: /_static/images/FFC-4P/SW1.png

If you have stereo pair on CAM_B and CAM_C, and want to have dot projector synced with stereo pair, you should move the switch 2 or 3 up (ON). Keep in mind that **only one** switch can be up at a time.


.. include:: /pages/includes/imu_bno085.rst

Dimensions and Weight
*********************
* Width: 62 mm
* Height: 38 mm
* Length: 22 mm (PCBA and heatsink)
* Weight: 41g (PCBA and heatsink)

.. thumbnail:: /_static/images/FFC-4P/OAK-FFC-4P_dimensions.png

General information
*******************

* 2x 2-Lane MIPI interface
* 2x 4-Lane MIPI interface
* 5V power input via barrel jack
* USB 3.1 Gen 1 Type-C
* Interface for Luxonis :ref:`OAK-SoM-Pro`
* Pads for OAK-SoM-Pro 1.8V SPI
* Pads for OAK-SoM-Pro 3.3V SDIO
* Pads for OAK-SoM-Pro 1.8V Aux Signals (I2C, UART, GPIO)
* 5V Fan OR USB Type-C
* Design files produced with Altium Designer 20

.. include:: /pages/includes/ffc-depth-perception.rst

.. thumbnail:: /_static/images/FFC-4P/OAK-FFC-4P.png

.. include:: /pages/includes/rvc2_power_consumption.rst

.. include:: /pages/includes/rvc2_operating_temp.rst

Getting started
***************

The OAK-FFC-4P is powered via USB Type-C or from a 5V, 5.5m x 2.5mm barrel jack, and interfaces to a host via USB 3.1 Gen1 Type-C. With cameras and the
:ref:`OAK-SoM-Pro`, total power consumption usually stays below the 900ma specification of USB 3, but Type-C power of 1.5A or greater is recommended.

Interfacing with the OAK-SoM-Pro is also possible with OAK-FFC-4P connector pads J3, J4, and J5. These pads are designed for the Amphenol/FCI
20021121-00010T1LF or equivalent. Please refer to the schematics for pinout information.

The reset button resets the OAK-SoM-Pro only. The boot button overrides boot mode to USB boot if different boot mode is set on
the NOR Flash.

The 5V LED indicates 5V power is present on the board. The PG LED indicates "power good" from the OAK-SoM-Pro. The "RUN" LED indicates that the 
OAK-SoM-Pro is not in reset.

FFC cables
**********

For FFC cables we use `Molex series 15166 <https://www.molex.com/molex/search/partSearch?query=15166>`__. Along with the OAK FFC board, we ship
**26 pin count, same-sided, 152mm** cables (part number `151660281 <https://www.molex.com/molex/products/part-detail/cable/0151660281>`__).
If you would like to use **shorter/longer FFC cables**, you can get them `here <https://www.molex.com/molex/search/deepSearch?pQuery=q%253D*%253A*%2540fq%253Dcollection%253Aimpulse%2540fq%253Dcollection%253Aimpulse%2540fq%253Dproductseries%253A%252215166%2522%252BOR%252Bengineeringnumber%253A%252215166%2522%2540fq%253Dcategory%253A%2522Cable%2522%2540fq%253Dcircuitsloaded%253A%252226%2522&currentQuery=contactlayouttype%3AA%2B%2528same%2Bside%2529&origin=_l1stv13w>`__.

3D Models
*********

- Board (PCBA) STEP files `here <https://github.com/luxonis/depthai-hardware/tree/master/DD2090FFC_DepthAI_4-camera_FFC/3D_Models>`__

Files
*****

* `Altium Design Files <https://github.com/luxonis/depthai-hardware/tree/master/DD2090FFC_DepthAI_4-camera_FFC/PCB>`__
* `Assembly Drawing <https://github.com/luxonis/depthai-hardware/blob/master/DD2090FFC_DepthAI_4-camera_FFC/Docs/Assembly%20Drawing%20PDF/Production.PDF>`__
* `Assembly Outputs <https://github.com/luxonis/depthai-hardware/tree/master/DD2090FFC_DepthAI_4-camera_FFC/Docs/Assembly%20Outputs>`__
* `Fabrication Drawing <https://github.com/luxonis/depthai-hardware/blob/master/DD2090FFC_DepthAI_4-camera_FFC/Docs/Fabrication%20Drawing%20PDF/Production.PDF>`__
* `Fabrication Outputs <https://github.com/luxonis/depthai-hardware/tree/master/DD2090FFC_DepthAI_4-camera_FFC/Docs/Fabrication%20Outputs>`__
* `Schematic <https://github.com/luxonis/depthai-hardware/blob/master/DD2090FFC_DepthAI_4-camera_FFC/Docs/Schematic%20PDF/Production.PDF>`__

.. include::  /pages/includes/footer-short.rst
